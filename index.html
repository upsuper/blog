<!DOCTYPE html>
<html lang="en">
<head>
        <title>鬼の领地</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
                <link href="http://upsuper.github.com/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="鬼の领地 Atom Feed" />
                
        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="./">鬼の领地 </a></h1>
                <nav><ul>
                                                                                                    <li ><a href="./category/blog.html">Blog</a></li>
                                    <li ><a href="./category/research.html">Research</a></li>
                                    <li ><a href="./category/script.html">Script</a></li>
                                    <li ><a href="./category/study.html">Study</a></li>
                                    <li ><a href="./category/technique.html">Technique</a></li>
                                </ul></nav>
        </header><!-- /#banner -->
                
            

                            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="./new-homepage-2013.html">2013年新首页</a></h1> 
                    <footer class="post-info">
        <abbr class="published" title="2013-02-17T19:28:00">
                2013&#24180;02&#26376;17&#26085;
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="./author/xidorn-quan.html">Xidorn Quan</a>
        </address>
        <p>In <a href="./category/blog.html">Blog</a>. </p>
<p>tags: <a href="./tag/homepage.html">Homepage</a><a href="./tag/html.html">HTML</a><a href="./tag/css.html">CSS</a><a href="./tag/svg.html">SVG</a></p>
</footer><!-- /.post-info --><p>由于之前跟其他人一起合租的一个虚拟主机空间很快就要到期了，而我的域名 upsuper.org 一直停靠在那上面，没有迁移到自己后来买的 VPS 上，于是今天决定把域名指过去。之前已经花了一番功夫把博客里面的大把文章转移到了这个 GitHub 上面的新博客里，剩下的主要就是首页了。</p>
<p>当年做的首页很久没有维护了，有一些链接甚至应该已经是死链了。而现在感觉能放上去的链接实在太少了，不好保留原来的样式，所以就新做了一个。既然重新做，这自然又是练手的好时机，一面看看自己（自我感觉良好）的设计，一面学习学习那些新的技术。</p>
<p>之前在做 <a href="https://github.com/upsuper/white">white</a> 这个应用的时候，就研究过 CSS3 里许多有趣的东西，其中不少就被我用在了这次做新首页上。</p>
<h2>设计</h2>
<p>参考了 <a href="http://reeoo.com/">Reeoo</a> 网站里面的一些设计之后，脑中大概形成了新首页的设计：中间照旧地放上标志性的 Logo，旁边将链接围成一圈，然后绕着中心旋转；作为平衡，在链接圈外加一圈逆向旋转的虚线；鼠标放到链接上时停止旋转，并且呈现某种与所指链接有关的效果。</p>
<p>以最近所活跃的网站作为链接选择的标准，最后选择了<a href="http://upsuper.github.com/blog/">这个博客</a>、<a href="https://twitter.com/upsuperx">Twitter 页面</a>、<a href="https://github.com/upsuper">GitHub 页面</a>、<a href="http://bangumi.tv/user/upsuper">Bangumi 页面</a>和我的 Gmail 地址作为链接。一开始的想法是在鼠标悬停到链接上时将中间的 Logo 换成对应网站的 Logo，但是考察了一圈这几个网站的图片，感觉风格差异太大，放在一起好像很不好看。而且我也不会画画，没法把它们统一风格，于是就作罢了。</p>
<p>因为不怎么会使用那些画图软件，所以干脆就直接用纸笔来画效果图，在脑子里想象成品应该长的样子。当然我在纸上画画的功力也不怎么样，连一个圆都画不圆，也只是勉强能作为参考的水准。</p>
<h2>实现</h2>
<p>因为想到 CSS3 应该已经相当强力了，所以一开始是想完全使用 CSS3 来实现的，想着图形只要用 <code>transform</code> 变换一下都可以实现，圆形就用 <code>border-radius</code> 画，旋转动画只要用 <code>animation</code> 就可以了，这样除了中心的 Logo 以外，便一张图片都不需要了。当然，这种想法是美好的，可惜现实是残酷的：即使是 CSS3 也远没有到我曾经设想的想实现什么就能实现什么的水平，而且浏览器实现还有各种这样那样的问题……</p>
<h3>扇形链接 问题一</h3>
<p>第一个遇到的阻碍便是周围绕转的扇形链接，最初的想法如上面说，是希望使用 <code>transform</code> 这个属性的 <code>matrix</code> 函数来做任意变换。我总是想着，都能上矩阵了，应该是没什么做不到的吧。在这上面花了不少时间研究，想计算出一个矩阵。最后突然想到，矩阵变换根本不能做非线性运算，也就是说根本不可能把一个矩形变成扇形，遂放弃这种方法。</p>
<p>虽然放弃用纯 CSS 了，但是不想放弃这个设计，所以就考虑了别的方法。第一个想到的就是 SVG 了，因为 SVG 可以直接内嵌在 HTML 里面，想过去真是方便。但是潜在 HTML 里面的话，又会影响 HTML 的“文档性”，感觉不爽。因此就采用了现在的方法，使用独立的 SVG 图片在 CSS 里面引用其为背景。这种做法也算是一个折中，因为 SVG 也是代码编写的，所以某种意义上也算是没有增加图片的数量吧。</p>
<h3>扇形链接 问题二</h3>
<p>这个问题虽然用 SVG 在视觉效果上轻松解决了，但是随之也带来了另一个问题：如何让链接覆盖整个扇形区域呢？如果链接是一块区域的话自然比但只有文字部分更方便点击，但是如果使用普通的矩形块来覆盖的话，相邻的扇形就会有链接重叠的部分，点击的时候就可能进入到预期外的页面，无论如何这样都是非常糟糕的。这个时候又想到了 <code>transform</code>。</p>
<div style="float: right;"><img src="./static/images/new-homepage-2013-a.png" /></div>

<p>这个 <code>transform</code> 虽然不能把矩形变成扇形，但变成梯形总是可以的吧？因为视觉形状已经由 SVG 图片代劳了，实际链接的有效区域只要保证覆盖必要的区域并且不会相互覆盖即可，多覆盖一些是无所谓的~于是变成梯形，让梯形斜边与扇形两边重合，梯形下底与扇形大弧相切，上底连接小弧两端点即可。</p>
<p>查了一番资料，一个坏消息和一个好消息。坏消息是，单纯的 2D 变换连梯形都做不出来，好消息是我们还有 3D 变换。结合了 <code>perspective</code> 和 <code>transform</code> 两个属性，调了很久终于调成功了。5个连接的实际范围如右图红色部分所示。因为多出来的部分没有相互重合，所以关系不是很大，总之这样在绝大多数情况下对链接的预期和实际情况是相符的。</p>
<h3>扇形链接 更多问题</h3>
<p>但是这么做了之后，再次引出一个新的问题 (orz 就这个东西问题真多)：因为链接被变形了，链接里面的文字也扭曲得没法看了。本来试图用 CSS 变换回来，可试来试去效果都不好，最后决定用 JavaScript 将文字提取出来放到链接外面，单独对其设置样式。这样就既保证了 HTML 的文档性，又方便了实现。</p>
<p>在测试 Chrome 下的情况的时候，出现了一个新的问题是在扇形区域的一些部分，链接是无法点击的。经过研究发现是链接的形状仍为矩形的父元素遮蔽了一部分其他链接的区域。这个解决起来就轻车熟路了，直接将父元素的 <code>pointer-events</code> 设置为 <code>none</code>，并将链接的这个属性设置为 <code>auto</code> 就可以了。这种做法带来的唯一的麻烦是你就通不过 <a href="http://jigsaw.w3.org/css-validator/">W3C 的 CSS 验证</a>了，不过无所谓啦这个。</p>
<h3>虚线外框</h3>
<p>另一个问题就是外圈反向旋转的虚线，本以为直接使用 <code>border</code> 的 <code>dashed</code> 做虚线边框，然后 <code>border-radius</code> 把它弄成圆的就可以了。这种方法在 Chrome 上是可行的，但是到了 Firefox 上就行不通了：整个圆竟然变成了实线。我在 Mozilla 的 Bugzilla 上面还找到了这个问题相关的 Bug 两枚：<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=382721">Bug 382721</a>、<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=652650">Bug 652650</a>，看起来也是老问题了，至今没有解决呢。最后无奈，虚线边框也使用 SVG 解决了。</p>
<h3>旋转与悬浮效果</h3>
<p>至于旋转并没有花什么力气倒是顺利解决了，毕竟这个就是 CSS3 的主打功能之一。CSS3 的动画用起来还是很方便的，唯一的问题是 WebKit 内核的浏览器还必须使用 <code>-webkit-</code> 前缀的东西才行。在悬停的时候，使用 <code>animation-play-state: paused</code> 就可以暂停，一行 JavaScript 都不需要。</p>
<p>因为放弃了在中间显示图标的设计，最后决定改变背景色。在鼠标悬浮在某个连接时，使用这个网站的印象色作为页面背景色，并且使用 <code>trasition</code> 来做渐变。为了方便编写，我直接把每个链接对应的色彩写在 <code>dataset</code> 里。这也算是很轻松地实现了，只是选色选了一会儿。直接截取网站的主要印象色太过于鲜亮了，完全不适合作为背景色，最后还是到维基百科的 <a href="http://en.wikipedia.org/wiki/Web_Colors">Web colors</a> 这个条目里挑选了几个淡一些的颜色。</p>
<h3>关于兼容性</h3>
<p>因为知道这次用了很多很新的东西，所以彻底放弃对 IE 的支持了，甚至于连要求升级的页面都懒得做了。不过即使是 Firefox 和 Chrome 对我所用的这些特性也仍然达不到完美的程度。属性需要前缀这种事情都已经没什么好说的了。</p>
<div style="float: right;"><img src="./static/images/new-homepage-2013-b.png" /></div>

<p>Chrome 里面最让我不满意的一个地方：有问题的 <code>border-radius</code> 实现。说实话这个东西的问题还真是不少，Firefox 下有虚线变实线的问题，Chrome 下也有 Chrome 的问题，这个问题就是 <code>border-radius</code> 的边缘不符合预期。为了限制链接不泄露到圆外，同时使得鼠标不在圆内时不会导致旋转暂停，我在整个圆的容器上加上了 <code>border-radius</code> 把它变成圆形，并且使用 <code>overflow: hidden</code> 防止任何内部元素泄漏到圆外。这种想法想必是很有意义的，不过能不能实现嘛……</p>
<p>如右图，左边的是 Firefox 中经过上面处理后的5个链接的有效区域，右边是 Chrome 的。Firefox 在这里很完美地达成了我们的愿望，可是 Chrome 呢……看过去似乎也很努力地想要去实现了，只可惜看起来跟狗啃的一样，和我们的期待相去甚远……本来还想使用中心的 Logo 来屏蔽泄漏到中间部分的链接区域，也因为同样的原因在 Chrome 下无法使用而作罢了。</p>
<h2>总结</h2>
<p>总体来说，这真是一篇又臭又长的文章，不过里面用到的一些技巧自认为还蛮有意思的。写出来一方面作为一个记录，另一方面也找点东西填充一下久不更新的博客，毕竟不能每次都开一个新博客然后就没下文了嘛。</p>
<p>把首页搞定之后，接下来也就是好好琢磨一下怎么整一整这个博客的主题了。之前在 GitHub 上看 <a href="https://github.com/getpelican/pelican-themes/">Pelican 官方收集的主题</a>，觉得能看的都没几个，更别说满意的了，果然技术宅们都不怎么擅长设计呢。相比起来，我大概还算不错的了吧？</p>
<h2>参考资料</h2>
<ul>
<li>Mozilla Developer Network: <a href="https://developer.mozilla.org/en-US/docs/CSS">CSS</a>, <a href="https://developer.mozilla.org/en-US/docs/SVG">SVG</a></li>
<li><a href="http://www.useragentman.com/blog/2011/01/07/css3-matrix-transform-for-the-mathematically-challenged/">The CSS3 matrix() Transform for the Mathematically Challenged</a></li>
</ul><p>There are <a href="./new-homepage-2013.html#disqus_thread">comments</a>.</p>                </article>
                            </aside><!-- /#featured -->
                            <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">
                                                

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="./https-and-server-name.html" rel="bookmark"
                           title="Permalink to HTTPS 与服务器名">HTTPS 与服务器名</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2013-01-23T18:11:00">
                2013&#24180;01&#26376;23&#26085;
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="./author/xidorn-quan.html">Xidorn Quan</a>
        </address>
        <p>In <a href="./category/study.html">Study</a>. </p>
<p>tags: <a href="./tag/security.html">Security</a></p>
</footer><!-- /.post-info -->                <p>一直以来都觉得用 HTTPS 的话，所有传输的信息都是密文传输的。正是因为如此，用 hosts 配合 HTTPS 来绕过墙访问一些敏感网站一直是一种看过去天衣无缝的完美方法：所有的程序都不需要修改，不需要知道如何使用代理，只要照常使用就可以了。唯一的缺陷是，hosts 的地址可能不时会失效，需要更换。而这唯一的缺陷，还可以用私设反向代理来解决。完美，毫无破绽。</p>
<h2>提问</h2>
<p>可当我对安全协议有一些了解之后，发现这件事情并没有那么简单。HTTPS 只是简单地将 HTTP 协议包裹进了 SSL/TLS，作为它们的应用数据。而 SSL/TLS 的协议流程，简单地来说可以分为握手和交换数据两大部分。而 HTTP 的数据，作为应用数据，显然是在交换数据阶段进行传送的，换句话说，握手这件事情，应该跟 HTTP 协议里的东西没有半毛钱关系。毕竟，握手的大多数内容都可以被认为是明文进行的嘛，如果握手的内容里有 HTTP ...</p>
                <a class="readmore" href="./https-and-server-name.html">read more</a>
                <p>There are <a href="./https-and-server-name.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="./new-blog-in-github.html" rel="bookmark"
                           title="Permalink to 在 GitHub 上建一个新的博客">在 GitHub 上建一个新的博客</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2012-12-31T00:00:00">
                2012&#24180;12&#26376;31&#26085;
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="./author/xidorn-quan.html">Xidorn Quan</a>
        </address>
        <p>In <a href="./category/blog.html">Blog</a>. </p>
<p>tags: <a href="./tag/blog.html">Blog</a><a href="./tag/github.html">GitHub</a></p>
</footer><!-- /.post-info -->                <p>一直想着将技术向博客迁移到 GitHub Pages 上，觉得这样大概可以使我显得更 Geek 一点吧？不过呢，因为一直以来各种事情很多，所以一直没有去做。（其实跟事情多也没什么关系吧，看看你自己都多久没写博客了……）最近看到之前买的虚拟空间快要到期了，因为不怎么打算继续续下去了，所以估量着把里面的东西迁移出来。另一方面，末日的2012过去了，新世界2013年到来了，顺便也就盘算着重新开始写博客？不过果然还是觉得有点麻烦呢……</p>
<p>既然是将这里定位于技术向的博客的话，自然除了关于这个博客本身的事情以外，其他都是技术讨论了。我其实也一直想把技术之外的一些内容单独放在一个博客里，只不过因为太懒了也是一直没去建的，估计在短时间内也不会去做吧，现在都没什么写东西的激情了呢。</p>
<p>这个博客的标题“鬼の领地”是延续自之前的博客的，它取自我中二的年代，正如我的常用 ID upsuper 一样。同时与之前我的每一个博客一样，我会把过去的内容挑选一些放入新的博客里面。另外原来参与 <a href="https://twitter.com/fanzeyi">@fanzeyi</a> 同学的 <a href="https://github.com/PyCodersCN">PyCodersCN</a> 项目的时候翻译过的一些文章也准备放进来。因为实在懒于写自己的东西（大多只是一些小东西，就不想单独写文章了），所以也考虑不定期的译一些自己觉得不错的文章放在这个博客里，就当练练中英文水平好了（其实是为了充数吧）。</p>
<p>关于这个博客本身，目前是准备使用 ...</p>
                <a class="readmore" href="./new-blog-in-github.html">read more</a>
                <p>There are <a href="./new-blog-in-github.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="./implementing-a-generator-yield-in-a-python-c-extension.html" rel="bookmark"
                           title="Permalink to [翻译] 使用 Python C 扩展实现生成器/yield">[翻译] 使用 Python C 扩展实现生成器/yield</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2012-04-13T21:53:00">
                2012&#24180;04&#26376;13&#26085;
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="./author/xidorn-quan.html">Xidorn Quan</a>
        </address>
        <p>In <a href="./category/technique.html">Technique</a>. </p>
<p>tags: <a href="./tag/python.html">Python</a><a href="./tag/c.html">C</a></p>
</footer><!-- /.post-info -->                <p>原文：<a href="http://eli.thegreenplace.net/2012/04/05/implementing-a-generatoryield-in-a-python-c-extension/">Implementing a generator/yield in a Python C extension</a></p>
<p>在 Python 中，生成器 (generator) 是一个返回迭代器 (iterator) 对象的函数。虽然有很多方法来实现，不过最优雅和常用的形式是使用 <code>yield</code> 语句。</p>
<p>举例来说，这是一个简单的例子：</p>
<div class="codehilite"><pre><span class="k">def</span> <span class="nf">pyrevgen</span><span class="p">(</span><span class="n">seq</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">seq</span><span class="p">)):</span>
        <span class="k">yield</span> <span class="n">i</span><span class="p">,</span> <span class="n">elem</span>
</pre></div>


<p>这里的 <code>pyrevgen</code> 函数就是一个生成器。给定一个序列，它将会返回一个迭代器用以逆序输出这个串的元素并附上序号。比如说：</p>
<div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">pyrevgen</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b ...</span></pre></div>
                <a class="readmore" href="./implementing-a-generator-yield-in-a-python-c-extension.html">read more</a>
                <p>There are <a href="./implementing-a-generator-yield-in-a-python-c-extension.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="./exploring-python-code-objects.html" rel="bookmark"
                           title="Permalink to [翻译] 探索 Python 代码对象">[翻译] 探索 Python 代码对象</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2012-03-31T05:50:00">
                2012&#24180;03&#26376;31&#26085;
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="./author/xidorn-quan.html">Xidorn Quan</a>
        </address>
        <p>In <a href="./category/study.html">Study</a>. </p>
<p>tags: <a href="./tag/python.html">Python</a></p>
</footer><!-- /.post-info -->                <p>原文：<a href="http://late.am/post/2012/03/26/exploring-python-code-objects">Exploring Python Code Objects</a></p>
<p>由于受到 <a href="http://www.dabeaz.com/">David Beazley</a> 在 <a href="https://us.pycon.org/2012/">PyCon</a> 上的 <a href="http://pyvideo.org/video/659/keynote-david-beazley">Keynote</a> 的启发，近来我四处学习与 Python 代码对象 (code object) 相关的内容。我并没有什么特别的利器，也没有专门的任务去解决 (至今为止？)，所以请将这篇文章看做一些也许有趣的记录和随笔 (如果没意思的话，抱歉)。</p>
<p><em>免责声明：</em>这篇文章是关于 CPython 2.7 的，虽然其中的大部分对于其他的 CPython 版本应该也是正确的 (包括 3.x)。但我不保证它在 PyPy、Jython、IronPython 等实现上是正确和适用的。</p>
<h2>第0步：是什么？</h2>
<p>所以首先，代码对象是什么呢？许多人 (特别是仇视 Python 的人 ...</p>
                <a class="readmore" href="./exploring-python-code-objects.html">read more</a>
                <p>There are <a href="./exploring-python-code-objects.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="./python-internals-how-callables-work.html" rel="bookmark"
                           title="Permalink to [翻译] Python 内部：可调用对象是如何工作的">[翻译] Python 内部：可调用对象是如何工作的</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2012-03-25T09:10:00">
                2012&#24180;03&#26376;25&#26085;
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="./author/xidorn-quan.html">Xidorn Quan</a>
        </address>
        <p>In <a href="./category/study.html">Study</a>. </p>
<p>tags: <a href="./tag/python.html">Python</a><a href="./tag/c.html">C</a></p>
</footer><!-- /.post-info -->                <p>原文：<a href="http://eli.thegreenplace.net/2012/03/23/python-internals-how-callables-work/">Python internals: how callables work</a></p>
<p><em>【这篇文章所描述的 Python 版本是 3.x，更确切地说，是 CPython 3.3 alpha。】</em></p>
<p>在 Python 中，可调用对象 (callable) 的概念是十分基本的。当我们说什么东西是“可调用的”，马上可以联想到的显而易见的答案便是函数。无论是用户定义的函数 (你所编写的) 还是内置的函数 (经常是在 CPython 解析器内由 C 实现的)，他们总是用来被调用的，不是么？</p>
<p>当然，还有方法也可以调用，但他们仅仅是被限制在对象中的特殊函数而已，没什么有趣的地方。还有什么可以被调用呢？你可能知道，也可能不知道，只要一个对象所属的类定义了 <code>__call__</code> 魔术方法，它也是可以被调用的。所以对象可以像函数那样使用。再深入思考一点，类也是可以被调用的 ...</p>
                <a class="readmore" href="./python-internals-how-callables-work.html">read more</a>
                <p>There are <a href="./python-internals-how-callables-work.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="./using-fuzzy-matching-to-search-by-sound-with-python.html" rel="bookmark"
                           title="Permalink to [翻译] 在 Python 中使用模糊匹配根据发音搜索">[翻译] 在 Python 中使用模糊匹配根据发音搜索</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2012-03-10T16:39:00">
                2012&#24180;03&#26376;10&#26085;
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="./author/xidorn-quan.html">Xidorn Quan</a>
        </address>
        <p>In <a href="./category/technique.html">Technique</a>. </p>
<p>tags: <a href="./tag/python.html">Python</a><a href="./tag/sound.html">Sound</a></p>
</footer><!-- /.post-info -->                <p>原文：<a href="http://www.informit.com/articles/article.aspx?p=1848528">Using Fuzzy Matching to Search by Sound with Python</a></p>
<p><strong>当你编写代码搜索数据库时，你不能总是依赖于相信所有的数据项都有正确的拼写。DreamHost 的开发者以及《Python 标准库编程范例》(<em><a href="http://www.informit.com/store/product.aspx?isbn=0321767349">The Python Standard Library by Example</a></em>) 的作者 Doug Hellmann 在这篇文章中回顾了一些根据目标的发音，而不是准确的拼写，进行数据库搜索的方法。</strong></p>
<p>在数据库中搜索人名是一项独特的挑战。对于不同来源和不同年代的数据，你不但不能指望其中名字的拼写是正确的，甚至相同的名字如果多次出现时，它们的拼写都不一定一样。而储存的数据和搜索项之间也有可能因为个人喜好、文化差异、<a href="http://zh.wikipedia.org/wiki/%E5%90%8C%E9%9F%B3%E7%95%B0%E7%BE%A9%E8%AA%9E">同音词</a>、拼写错误、文盲或仅仅因为在某些时期根本没有标准拼法而出现差异。这些问题在历史学家、谱系学家和其他研究者的手写的文本记录中尤为常见。</p>
<p>一个常用的解决这样的字符串搜索问题的方法是寻找与搜索目标相近的值。但是，使用传统的<a href="http://en.wikipedia.org/wiki/Approximate_string_matching">模糊匹配算法</a>计算两个任意字符串之间的相似度，代价是很大的，同时它也不适合用于搜索大规模数据集。一个更好的解决方案是为数据库里的每一项预先计算一个哈希值，有一些专门的哈希算法正是为此设计的。这些语音算法 ...</p>
                <a class="readmore" href="./using-fuzzy-matching-to-search-by-sound-with-python.html">read more</a>
                <p>There are <a href="./using-fuzzy-matching-to-search-by-sound-with-python.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="./static-modification-of-python-with-python-the-ast-module.html" rel="bookmark"
                           title="Permalink to [翻译] AST 模块：用 Python 修改 Python 代码">[翻译] AST 模块：用 Python 修改 Python 代码</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2012-03-03T16:47:00">
                2012&#24180;03&#26376;03&#26085;
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="./author/xidorn-quan.html">Xidorn Quan</a>
        </address>
        <p>In <a href="./category/technique.html">Technique</a>. </p>
<p>tags: <a href="./tag/python.html">Python</a></p>
</footer><!-- /.post-info -->                <p>原文：<a href="http://blueprintforge.com/blog/2012/02/27/static-modification-of-python-with-python-the-ast-module/">Static Modification of Python With Python: The AST Module</a></p>
<p>修改代码在有时会变的十分有用，比如在进行测试和分析的时候。在这篇文章中，我们将看到如何使用 <code>ast</code> 模块对 Python 代码进行修改，同时还将看到一些使用了这个技术的工具。</p>
<h2>CPython 的编译过程</h2>
<div style="float: left; margin-right: 20px;"><img src="./static/images/pep339.png" /></div>

<p>在开始之前，我们应该先看看 CPython 的编译过程，这个过程在 <a href="http://www.python.org/dev/peps/pep-0339/">PEP 339</a> 中有详细的描述。</p>
<p>当然，在读这篇文章的时候，你并不需要对这个步骤有很深入的理解，不过这可以帮助你对整个过程有一个大体的了解。</p>
<p>首先，编译器会根据源代码生成一棵语法分析树 (Parse Tree)，随后，再根据语法分析树建立抽象语法树 (AST, Abstract Syntax Tree)。从 AST 中可以生成出控制流图 (CFG, Control Flow Graph ...</p>
                <a class="readmore" href="./static-modification-of-python-with-python-the-ast-module.html">read more</a>
                <p>There are <a href="./static-modification-of-python-with-python-the-ast-module.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="./dynamic-modify-cpu-number.html" rel="bookmark"
                           title="Permalink to 动态切换 Linux 使用的 CPU 数量">动态切换 Linux 使用的 CPU 数量</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2011-10-19T14:04:00">
                2011&#24180;10&#26376;19&#26085;
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="./author/xidorn-quan.html">Xidorn Quan</a>
        </address>
        <p>In <a href="./category/script.html">Script</a>. </p>
<p>tags: <a href="./tag/linux.html">Linux</a></p>
</footer><!-- /.post-info -->                <p>由于要测试一些代码，其运行结果会受到多核并行的影响，所以希望能够调整使用的 CPU 数量。网络上之前看到的方法是在内核的启动参数上添加一个 <code>maxcpus</code>，但是如果这样的话每切换一次都要重启一次，是在太麻烦了。想想 Linux 应该是很强大的，所以可以动态修改 CPU 数量才对。</p>
<p>无意中看到 Linux 代码的 <code>Documentation</code> 文件夹下有个文件叫做 <code>cpu-hotplug.txt</code>，于是就看了一下，发现可以在 <code>/sys/devices/system/cpu</code> 看到代表各 CPU 的文件夹按照 <code>cpuX</code> 的命名方式，如 <code>cpu0</code>、<code>cpu1</code>、<code>cpu2</code> 等。这些文件夹里面有一个 <code>online</code> 文件，如果其值为0则禁用该 CPU，如果为1则启用该 CPU。注意，这里需要 <code>root</code> 权限哦。</p>
<p>因为我只要在单核和多核之间切换 ...</p>
                <a class="readmore" href="./dynamic-modify-cpu-number.html">read more</a>
                <p>There are <a href="./dynamic-modify-cpu-number.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="./setup-lxr.html" rel="bookmark"
                           title="Permalink to 安装配置 LXR">安装配置 LXR</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
        <abbr class="published" title="2011-10-03T15:07:00">
                2011&#24180;10&#26376;03&#26085;
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="./author/xidorn-quan.html">Xidorn Quan</a>
        </address>
        <p>In <a href="./category/technique.html">Technique</a>. </p>
<p>tags: <a href="./tag/linux.html">Linux</a></p>
</footer><!-- /.post-info -->                <p>专业课学习操作系统，满心欢喜地以为可以是 Linux 代码导读，结果选用了一本八十年代的教材，介绍 UNIX v6 的。于是自己从图书馆借来了内核开发的入门读物《Linux 内核设计与实现》。既然是介绍内核的书，自然少不了代码，但是书中又不可能将每个提到的代码的相关信息全部写出来，这时就得自己去查看代码。查看代码的话，虽然 Linux 的代码可以很容易地得到，但那来看终归有些麻烦，各种调用需要查找半天。于是想起了很有名的一个网站 <a href="http://lxr.linux.no">LXR</a>，Linux 交叉引用。这个网站好是好，就是网络原因速度太慢，于是就想自己装一个。</p>
<p>先说一句，下面的安装环境都是64位 Gentoo。</p>
<p>最开始找到了 <a href="http://sourceforge.net/projects/lxr/">LXR Cross Referencer</a> 这个项目，一看最后更新时间还挺新，看起来是一直都还在维护的。然后在 Gentoo 的网站上查到 LXR 是可以直接用 portage 安装的，于是安装，安装相关的包，最后放弃了。出于什么原因我也不记得了 ...</p>
                <a class="readmore" href="./setup-lxr.html">read more</a>
                <p>There are <a href="./setup-lxr.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                            </ol><!-- /#posts-list -->
                            <p class="paginator">
        Page 1 / 3
            <a href="./index2.html">&raquo;</a>
    </p>
                        </section><!-- /#content -->
                    <section id="extras" class="body">
                                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://upsuper.github.com/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
                            
                                                    <li><a href="https://twitter.com/upsuperx">Twitter</a></li>
                                                    <li><a href="https://github.com/upsuper">GitHub</a></li>
                                                </ul>
                </div><!-- /.social -->
                </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4908719-6']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'upsuper-github';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>