<!DOCTYPE html>
<html lang="en">
<head>
        <title>安装配置 LXR</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="./theme/css/main.css" type="text/css" />
                <link href="http://upsuper.github.com/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="鬼の领地 Atom Feed" />
                
        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie.css"/>
                <script src="./js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="./css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="./">鬼の领地 </a></h1>
                <nav><ul>
                                                                                                    <li ><a href="./category/blog.html">Blog</a></li>
                                    <li ><a href="./category/research.html">Research</a></li>
                                    <li ><a href="./category/script.html">Script</a></li>
                                    <li ><a href="./category/study.html">Study</a></li>
                                    <li class="active"><a href="./category/technique.html">Technique</a></li>
                                </ul></nav>
        </header><!-- /#banner -->
        <section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="./setup-lxr.html" rel="bookmark"
           title="Permalink to 安装配置 LXR">安装配置 LXR</a></h1>
          </header>

    <div class="entry-content">
      <footer class="post-info">
        <abbr class="published" title="2011-10-03T15:07:00">
                一 03 十月 2011
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="./author/xidorn-quan.html">Xidorn Quan</a>
        </address>
        <p>In <a href="./category/technique.html">Technique</a>. </p>
<p>tags: <a href="./tag/linux.html">Linux</a></p>
</footer><!-- /.post-info -->      <p>专业课学习操作系统，满心欢喜地以为可以是 Linux 代码导读，结果选用了一本八十年代的教材，介绍 UNIX v6 的。于是自己从图书馆借来了内核开发的入门读物《Linux 内核设计与实现》。既然是介绍内核的书，自然少不了代码，但是书中又不可能将每个提到的代码的相关信息全部写出来，这时就得自己去查看代码。查看代码的话，虽然 Linux 的代码可以很容易地得到，但那来看终归有些麻烦，各种调用需要查找半天。于是想起了很有名的一个网站 <a href="http://lxr.linux.no">LXR</a>，Linux 交叉引用。这个网站好是好，就是网络原因速度太慢，于是就想自己装一个。</p>
<p>先说一句，下面的安装环境都是64位 Gentoo。</p>
<p>最开始找到了 <a href="http://sourceforge.net/projects/lxr/">LXR Cross Referencer</a> 这个项目，一看最后更新时间还挺新，看起来是一直都还在维护的。然后在 Gentoo 的网站上查到 LXR 是可以直接用 portage 安装的，于是安装，安装相关的包，最后放弃了。出于什么原因我也不记得了，最后一个原因肯定是不好看，肯定达不到上面那个网站的效果，所以就放弃了，到那个网站上去下载 LXR 分出来的版本 LXRng。（话说这个 ng 不会是表示 next generation 吧？）</p>
<h2>安装支持库</h2>
<p>首先从 LXR 的网站上用 <code>git</code> 把代码下载下来，</p>
<div class="codehilite"><pre>git clone git://lxr.linux.no/git/lxrng.git
</pre></div>


<p>然后我打开了里面的 <code>INSTALL</code> 文件，里面写着好多好多库。先说结论吧，在 Gentoo 的官方源里面，有两个库是没有的，分别是 <code>Search-Xapian</code> 和 <code>CGI-Ajax</code>，这两个最后安装。</p>
<p>最首要的是先安装 PostgreSQL，由于 LXR 是用 Perl 写成的，所以在 <code>USE</code> 里面加入了 Perl，然后安装。安装完成以后，安装 PostgreSQL 的 Perl 库 <code>DBD-Pg</code>。接下去安装 <code>Cgi-Simple</code>、<code>HTML-Parser</code>、<code>HTML-Entities</code>、<code>Term-ProgressBar</code>、<code>Devel-Size</code>、<code>Template-Toolkit</code>，这些都很容易，直接安装就可以了。（虽然我确定这些包的名称还费了些时间）</p>
<p>然后是 Apache 和它的 <code>mod_perl</code>，因为之前安装了，并没有太大困难，这里也不详述了。</p>
<p>最麻烦的问题来了，对于源里没有的 <code>Search-Xapian</code> 和 <code>CGI-Ajax</code> 怎么办呢？先把 Xapian 的主要部分给安装了吧。</p>
<p>安装 <code>xapian</code> 和 <code>xapian-bindings</code> 这两个包。因为这两个包的最新版本对 amd64 平台都是 unstable 的，所以要在 <code>/etc/portage/package.keywords</code> 里面加入</p>
<div class="codehilite"><pre><span class="p">=</span><span class="n">dev</span><span class="o">-</span><span class="n">libs</span><span class="o">/</span><span class="n">xapian</span><span class="o">-</span>1<span class="p">.</span>2<span class="p">.</span>7<span class="o">-</span><span class="n">r1</span> <span class="o">~</span><span class="n">amd64</span>
<span class="p">=</span><span class="n">dev</span><span class="o">-</span><span class="n">libs</span><span class="o">/</span><span class="n">xapian</span><span class="o">-</span><span class="n">bindings</span><span class="o">-</span>1<span class="p">.</span>2<span class="p">.</span>7<span class="o">-</span><span class="n">r2</span> <span class="o">~</span><span class="n">amd64</span>
</pre></div>


<p>（是的，在 Gentoo 的查询系统上显示，<code>xapian</code> 的 1.2.5 是稳定版本，我也曾经试图安装那个版本，然后仅安装非稳定版的 <code>-bindings</code>，但是之后安装的 <code>Search-Xapian</code> 还是会要求新的 1.2.7，所以就这样吧。另外一般状况下，最前面是写 <code>&gt;=</code> 的，但是我出于个人喜好和完美主义，写了 <code>=</code>。）接下去直接安装这两个包即可。记得检查已经在 <code>USE</code> 里面加入了 <code>perl</code>。</p>
<p>接下去安装那两个包。</p>
<p>Gentoo 有个很神奇的工具，也是我这次才发现的，叫做 <code>g-cpan</code>，可以把 CPAN 上面的包自动打包安装为 <code>portage</code> 的包。不过如果是第一次使用必须要先配置一下，在 <code>/etc/make.conf</code> 最后加上</p>
<div class="codehilite"><pre><span class="n">ACCEPT_KEYWORDS</span><span class="p">=</span>&quot;<span class="n">amd64</span>&quot;
<span class="n">PORTDIR_OVERLAY</span><span class="p">=</span>&quot;<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">portage</span>&quot;
</pre></div>


<p>（虽然这个配置看过去很简单，不过因为一开始忽略了这件事情，所以纠结了很长时间……）</p>
<p>接下去用 <code>g-cpan</code> 安装就可以了</p>
<div class="codehilite"><pre>sudo g-cpan -g CGI::Ajax Search::Xapian
sudo emerge CGI-Ajax Search-Xapian
</pre></div>


<p>至此需要安装的东西就已经全部装完了，下面进入第二阶段~</p>
<h2>配置数据库</h2>
<p>这个很简单了，不过在配置之前要先把自己将会用到的用户加入到 <code>postgres</code> 组里以保证可以访问。最重要的是要把之后的 <code>apache</code> 用户加入到 <code>postgres</code> 组里，否则后面会出现一些状况。</p>
<p>然后 <code>su</code> 到 <code>postgres</code> 用户里，添加用户 <code>root</code>，并把 <code>root</code> 设置为管理员（因为之后生成的时候需要用到）</p>
<div class="codehilite"><pre>createuser root
</pre></div>


<p>然后创建 LXR 的数据库</p>
<div class="codehilite"><pre>createdb lxrng
</pre></div>


<p>大体上这样就没问题了。</p>
<h2>调整配置文件并建立工作目录</h2>
<p>我出于完美主义的原因，将 LXR 的工作目录放在了 <code>/var/lib/lxrng</code> 里面，如果你没有那些奇怪的癖好，完全可以直接在自己的文件夹下面放置这些东西。</p>
<p>首先要设置配置文件，将 LXR 根目录下的 <code>lxrng.conf-dist</code> 复制为 <code>lxrng.conf</code>，然后打开修改。里面大体上还是比较清晰的，如果只是要做一个 Linux 代码的交叉引用的话，大体上按照里面的配置，修改第10行</p>
<div class="codehilite"><pre><span class="k">my</span> <span class="nv">$gitrepo</span> <span class="o">=</span> <span class="nn">LXRng::Repo::</span><span class="n">Git</span>
    <span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="s">&#39;/var/lib/lxrng/repos/linux-2.6/.git&#39;</span><span class="p">,</span>
      <span class="n">release_re</span> <span class="o">=&gt;</span> <span class="sx">qr/^v[^-]*$/</span><span class="p">,</span>
      <span class="n">author_timestamp</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">);</span>
</pre></div>


<p>里面的那个路径，使其指向你放置代码的 git 源（一般是代码文件夹下的 <code>.git</code>）。</p>
<p>如果你没有使用 git 来抓取代码，而是直接下载某个版本的代码，如 v3.1，可以放置到比如 <code>/var/lib/lxrng/repos/linux/v3.1</code>，那么这个部分就修改为</p>
<div class="codehilite"><pre><span class="k">use</span> <span class="nn">LXRng::Repo::</span><span class="n">Plain</span><span class="p">;</span>
<span class="nv">$plainrepo</span> <span class="o">=</span> <span class="nn">LXRng::Repo::</span><span class="n">Plain</span>
    <span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="s">&#39;/var/lib/lxrng/repos/linux&#39;</span><span class="p">);</span>
</pre></div>


<p>即可。（注意上面的 <code>$gitrepo</code> 在下面还有使用过一次，如果修改的话需要一并修改）</p>
<p>接下去是第19行</p>
<div class="codehilite"><pre><span class="k">my</span> <span class="nv">$search</span>  <span class="o">=</span> <span class="nn">LXRng::Search::</span><span class="n">Xapian</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="s">&#39;/var/lib/lxrng/text-db/linux-2.6&#39;</span><span class="p">);</span>
</pre></div>


<p>需要在某个位置建立一个 <code>text-db</code> 文件夹，然后将上面的路径修改为你建立的那个文件夹的路径即可。同样的操作也发生在第29行</p>
<div class="codehilite"><pre>    <span class="c1"># Must be writable by httpd user:</span>
    <span class="s">&#39;cache&#39;</span>       <span class="o">=&gt;</span> <span class="s">&#39;/var/lib/lxrng/cache&#39;</span><span class="p">,</span>
</pre></div>


<p>注意这个文件夹需要对 <code>apache:apache</code> 可写。我的做法是把这个文件夹的组设置为 <code>apache</code>，然后设置权限为<code>0775</code>，当然也可以直接把所有者设置为 <code>apache</code> 然后保留原来权限。</p>
<p>注释掉下面这行</p>
<div class="codehilite"><pre>    <span class="s">&#39;ctags_flags&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s">&quot;-I\@$LXRng::ROOT/lxr-ctags-quirks&quot;</span><span class="p">],</span>
</pre></div>


<p>不要问我为什么，这个我真不知道，总之如果部注释掉一会儿会出错。</p>
<p>最后是要生成引用的版本和默认显示的版本：</p>
<div class="codehilite"><pre><span class="s">&#39;ver_list&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="nv">$gitrepo</span><span class="o">-&gt;</span><span class="n">allversions</span><span class="p">],</span>

<span class="s">&#39;ver_default&#39;</span> <span class="o">=&gt;</span> <span class="s">&#39;v2.6.20.3&#39;</span><span class="p">,</span>
</pre></div>


<p>我强烈建议你将 <code>$gitrepo-&gt;allversions</code> 修改为你想看的几个版本，甚至于只有一个版本也是没有问题的即使你有完整的历史记录，因为每个版本都需要生成很长时间，而且似乎过程很不稳定，如果没有特别的原因，最好不要生成太多版本。如果是不用 git 源的话，只要把你放在那个文件夹里的对应版本号填进去就可以了，最后修改默认显示的版本。</p>
<p>如果还想添加其他的代码，只要把代码最后 <code>return</code> 的大括号里面的部分复制一遍，根据需要修改就可以了。</p>
<h2>初始化数据库及生成交叉引用</h2>
<p>首先要添加一个符号链接</p>
<div class="codehilite"><pre>sudo ln -s /usr/bin/exuberants-ctags /usr/bin/ctags-exuberants
</pre></div>


<p>接下去没什么太大的差别，就是进入程序所在目录，然后</p>
<div class="codehilite"><pre>./lxr-db-admin linux --init
./lxr-genref linux
</pre></div>


<p>值得一说的是，这个过程非常非常非常漫长，在我的 i7 本上的虚拟机里，一跑至少三四个小时，而且看起来还很不稳定，不时会自动强制退出，而且退出以后可能会出现一些问题导致无法继续。这个问题比较严重，遇到这个问题如何解决放到之后的部分再来说吧。</p>
<h2>配置 Apache</h2>
<p>最后来配置 Apache。直接把文件夹下的 <code>apache2-site.conf-dist-mod_perl</code> 复制到 <code>/etc/apache/vhosts.d/10_lxrng.conf</code>，然后打开这个文件，将里面的所有 <code>@@LXRROOT@@</code> 和 <code>@@LXRURL@@</code> 根据自己的情况替换为相应的路径就可以了。然后重新启动 Apache</p>
<div class="codehilite"><pre>sudo /etc/rc.d/apache restart
</pre></div>


<h2>问题解决</h2>
<p>由于原来的版本在我这里基本上没什么希望能生成结束，所以我对这个程序做了一些修改，这个修改后的版本可以直接在我的 GitHub 上面找到：<a href="https://github.com/upsuper/lxrng">upsuper/lxrng</a>。如果需要的话，可以不使用原来官方的代码而直接使用我修改过的代码。主要的差别有几点：一是消除了生成交叉引用时过大量的输出信息；二是增加了交叉引用生成时刷写 Xapian 索引的频率，以减少退出重做时可能出现的错误；三是修正了一些最后浏览时可能遇到的问题。</p>
<p>当然生成的时候还是可能会出错，这我也没办法。如果生成时被意外中断，重新执行又出现错误，可以将我修改的那个程序里面的 <code>lxr-genref</code> 第336行</p>
<div class="codehilite"><pre>    <span class="c1">#warn(&quot;here $docid\n&quot;);</span>
</pre></div>


<p>的注释符去掉，重新运行 <code>lxr-genref</code>，然后查看当程序报错时停止的那个编号，比如 12345。然后执行 <code>psql lxrng</code> 进入 lxrng 数据库，执行</p>
<div class="codehilite"><pre><span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">hashed_documents</span> <span class="k">WHERE</span> <span class="n">doc_id</span><span class="o">&gt;=</span><span class="mi">12345</span>
</pre></div>


<p>然后再次执行 <code>lxr-genref</code>。这个过程可能反复一两次，直到不会报错位置。</p>
<p>如果用原始版本的话，最后在浏览的时候使用搜索，有可能会出现500错误以及无法显示出来的情况，如果出现，可以参考我做的修改。</p>
<h2>后记</h2>
<p>配置这个 LXR 真是折腾死我了，费了好大功夫，最后也总算是成功了。</p>
<p>另外真是很久很久没有在这里写东西了。也正因为这个过程实在太麻烦了，所以来写一写，权当一个记录。不过现在有 GitHub 这种东西，倒是好得多了。</p>
<h2>参考文档</h2>
<ul>
<li><a href="http://mohammadthalif.wordpress.com/2010/07/24/how-to-setup-lxr-%E2%80%93-step-by-step-guide-3/">How to setup LXR – Step by Step guide « Mohamed Thalib's Blog</a></li>
<li><a href="http://www.kernelchina.org/node/241">在自己的计算机上建立lxr源代码检索服务器 | kernelchina</a></li>
<li><a href="http://wenku.baidu.com/view/8150646727d3240c8447ef2d.html">lxrng.install-gentoo_百度文库</a></li>
<li><a href="http://www.gentoo.org/proj/en/perl/g-cpan.xml">Gentoo Linux Documentation — g-cpan Guide</a></li>
</ul>
<p>（貌似还有些别的参考资料，不记得是什么了……）</p>
<h2>参考配置文件</h2>
<p>最后最后贴一下自己的配置文件吧。配置文件里面声明了两个代码，一个是 Liunx 的，一个是 UNIX v6 的，Linux 是用 git，UNIX 是代码。程序全部放在 <code>/var/lib/lxrng</code> 里面，代码放在 <code>/var/lig/lxrng/repos</code> 里。</p>
<div class="codehilite"><pre><span class="c1"># -*- mode: perl -*-</span>
<span class="c1"># Configuration file</span>
<span class="c1">#</span>
<span class="c1">#</span>

<span class="k">use</span> <span class="nn">LXRng::Index::</span><span class="n">PgBatch</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">LXRng::Repo::</span><span class="n">Git</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">LXRng::Repo::</span><span class="n">Plain</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">LXRng::Search::</span><span class="n">Xapian</span><span class="p">;</span>

<span class="k">my</span> <span class="nv">$linuxrepo</span> <span class="o">=</span> <span class="nn">LXRng::Repo::</span><span class="n">Git</span>
    <span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="s">&#39;/var/lib/lxrng/repos/linux.git&#39;</span><span class="p">,</span>
      <span class="n">release_re</span> <span class="o">=&gt;</span> <span class="sx">qr/^v[^-]*$/</span><span class="p">,</span>
      <span class="n">author_timestamp</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">);</span>
<span class="k">my</span> <span class="nv">$unixrepo</span> <span class="o">=</span> <span class="nn">LXRng::Repo::</span><span class="n">Plain</span>
    <span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="s">&#39;/var/lib/lxrng/repos/unix&#39;</span><span class="p">);</span>

<span class="k">my</span> <span class="nv">$index</span>   <span class="o">=</span> <span class="nn">LXRng::Index::</span><span class="n">PgBatch</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="n">db_spec</span> <span class="o">=&gt;</span> <span class="s">&#39;dbname=lxrng;port=5432&#39;</span><span class="p">,</span> 
                     <span class="n">db_user</span> <span class="o">=&gt;</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">db_pass</span> <span class="o">=&gt;</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
                     <span class="c1"># table_prefix =&gt; &#39;lxr&#39;</span>
                     <span class="p">);</span>
<span class="k">my</span> <span class="nv">$search</span>  <span class="o">=</span> <span class="nn">LXRng::Search::</span><span class="n">Xapian</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">(</span><span class="s">&#39;/var/lib/lxrng/text-db&#39;</span><span class="p">);</span>

<span class="k">return</span> <span class="p">{</span>
    <span class="s">&#39;linux&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s">&#39;repository&#39;</span>  <span class="o">=&gt;</span> <span class="nv">$linuxrepo</span><span class="p">,</span>
    <span class="s">&#39;index&#39;</span>       <span class="o">=&gt;</span> <span class="nv">$index</span><span class="p">,</span>
    <span class="s">&#39;search&#39;</span>      <span class="o">=&gt;</span> <span class="nv">$search</span><span class="p">,</span>

    <span class="s">&#39;base_url&#39;</span>    <span class="o">=&gt;</span> <span class="s">&#39;http://upsuper-gentoo/lxr&#39;</span><span class="p">,</span>
    <span class="c1"># Must be writable by httpd user:</span>
    <span class="s">&#39;cache&#39;</span>       <span class="o">=&gt;</span> <span class="s">&#39;/var/lib/lxrng/cache/linux&#39;</span><span class="p">,</span>

    <span class="s">&#39;fs_charset&#39;</span>  <span class="o">=&gt;</span> <span class="s">&#39;iso-8859-1&#39;</span><span class="p">,</span>
    <span class="c1"># Tried successively</span>
    <span class="s">&#39;content_charset&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span> <span class="s">&#39;iso-8859-1&#39;</span><span class="p">],</span>

    <span class="s">&#39;languages&#39;</span>   <span class="o">=&gt;</span> <span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;GnuAsm&#39;</span><span class="p">,</span> <span class="s">&#39;Kconfig&#39;</span><span class="p">],</span>
    <span class="c1">#&#39;ctags_flags&#39; =&gt; [&quot;-I\@$LXRng::ROOT/lxr-ctags-quirks&quot;],</span>
    <span class="c1">#&#39;ver_list&#39;    =&gt; [$gitrepo-&gt;allversions],</span>
    <span class="s">&#39;ver_list&#39;</span>    <span class="o">=&gt;</span> <span class="p">[</span><span class="s">&#39;v2.6.34&#39;</span><span class="p">,</span> <span class="s">&#39;v3.0&#39;</span><span class="p">],</span>

    <span class="s">&#39;ver_default&#39;</span> <span class="o">=&gt;</span> <span class="s">&#39;v2.6.34&#39;</span><span class="p">,</span>

    <span class="s">&#39;include_maps&#39;</span> <span class="o">=&gt;</span> 
        <span class="p">[</span>
         <span class="p">[</span><span class="sx">qr|^arch/(.*?)/|</span><span class="p">,</span> <span class="sx">qr|^asm/(.*)|</span><span class="p">,</span>
          <span class="k">sub </span><span class="p">{</span> <span class="s">&quot;include/asm-$_[0]/$_[1]&quot;</span> <span class="p">}],</span>
         <span class="p">[</span><span class="sx">qr|^include/asm-(.*?)/|</span><span class="p">,</span> <span class="sx">qr|^asm/(.*)|</span><span class="p">,</span>
          <span class="k">sub </span><span class="p">{</span> <span class="s">&quot;include/asm-$_[0]/$_[1]&quot;</span> <span class="p">}],</span>
         <span class="p">[</span><span class="sx">qr|^|</span><span class="p">,</span> <span class="sx">qr|^asm/(.*)|</span><span class="p">,</span>
          <span class="k">sub </span><span class="p">{</span> <span class="nb">map</span> <span class="p">{</span> <span class="s">&quot;include/asm-$_/$_[0]&quot;</span> <span class="p">}</span>
            <span class="sx">qw(i386 x86_64)</span> <span class="p">}],</span>
         <span class="p">[</span><span class="sx">qr|^|</span><span class="p">,</span> <span class="sx">qr|(.*)|</span><span class="p">,</span>
          <span class="k">sub </span><span class="p">{</span> <span class="s">&quot;include/$_[0]&quot;</span> <span class="p">}],</span>
         <span class="p">],</span>
    <span class="p">},</span>
    <span class="s">&#39;unix&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s">&#39;repository&#39;</span>  <span class="o">=&gt;</span> <span class="nv">$unixrepo</span><span class="p">,</span>
    <span class="s">&#39;index&#39;</span>       <span class="o">=&gt;</span> <span class="nv">$index</span><span class="p">,</span>
    <span class="s">&#39;search&#39;</span>      <span class="o">=&gt;</span> <span class="nv">$search</span><span class="p">,</span>

    <span class="s">&#39;base_url&#39;</span>    <span class="o">=&gt;</span> <span class="s">&#39;http://upsuper-gentoo/lxr&#39;</span><span class="p">,</span>
    <span class="c1"># Must be writable by httpd user:</span>
    <span class="s">&#39;cache&#39;</span>       <span class="o">=&gt;</span> <span class="s">&#39;/var/lib/lxrng/cache/unix&#39;</span><span class="p">,</span>

    <span class="s">&#39;fs_charset&#39;</span>  <span class="o">=&gt;</span> <span class="s">&#39;iso-8859-1&#39;</span><span class="p">,</span>
    <span class="c1"># Tried successively</span>
    <span class="s">&#39;content_charset&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s">&#39;utf-8&#39;</span><span class="p">,</span> <span class="s">&#39;iso-8859-1&#39;</span><span class="p">],</span>

    <span class="s">&#39;languages&#39;</span>   <span class="o">=&gt;</span> <span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;GnuAsm&#39;</span><span class="p">],</span>
    <span class="c1">#&#39;ctags_flags&#39; =&gt; [&quot;-I\@$LXRng::ROOT/lxr-ctags-quirks&quot;],</span>
    <span class="s">&#39;ver_list&#39;</span>    <span class="o">=&gt;</span> <span class="p">[</span><span class="s">&#39;v6&#39;</span><span class="p">],</span>

    <span class="s">&#39;ver_default&#39;</span> <span class="o">=&gt;</span> <span class="s">&#39;v6&#39;</span><span class="p">,</span>

    <span class="s">&#39;include_maps&#39;</span> <span class="o">=&gt;</span> 
        <span class="p">[</span>
         <span class="p">[</span><span class="sx">qr|^|</span><span class="p">,</span> <span class="sx">qr|(.*)|</span><span class="p">,</span>
          <span class="k">sub </span><span class="p">{</span> <span class="s">&quot;sys/$_[0]&quot;</span> <span class="p">}],</span>
         <span class="p">],</span>
    <span class="p">},</span>
<span class="p">};</span>
</pre></div>
    </div><!-- /.entry-content -->
    
  </article>
</section>
        <section id="extras" class="body">
                        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>